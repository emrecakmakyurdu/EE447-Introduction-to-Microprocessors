			AREA subroutine,	READONLY,	CODE
			THUMB
			EXTERN	RECURSION
			EXPORT	ThirdRule
			
ADRES		EQU		0X20000000
				
ThirdRule

			PUSH	{R0,LR}
			MOV		R1,#9			;9'DAN KUCUK MU
			CMP		R0,R1
			BLS		JUMP			;KUCUKSE CIK
			MOV		R1,#999			;999'DAN BUYUK MU
			CMP		R0,R1
			BHI		JUMP			;BUYUKSE CIK
			
			MOV		R1,#5			;5'E BOLUNEBILIYOR MU
			UDIV	R2,R0,R1
			MUL		R2,R2,R1
			CMP		R0,R2
			BNE		JUMP			; BOLUNEMIYORSA CIK
			
			;; BURADA MIRROR YAPIP CHECK EDECEN, KUCUKSE R0'U DEGISTIRECEN
			PUSH	{R0}
			MOV		R1,#10
			LDR		R5,=ADRES
LOOP		UDIV	R2,R0,R1		; BASAMAKLARI BULAN KOD
			MUL		R2,R2,R1
			SUB		R2,R0,R2		; DIGIT ON THE RIGHTMOST
			STRB	R2,[R5],#1
			UDIV	R0,R0,R1		; SHIFT THE NUMBER
			CMP		R0,#0			; SAYI 0 OLMADIYSA DEVAM
			BNE		LOOP
			POP		{R0}
			
			SUB		R5,#1			; BIR ONCEKI ADRESE, MOST SIGNIFICANT DIGIT'E DON
			MOV		R2,#1			;R2 HEP 10 KATLARI OLACAK VE BU DEGERLE CARPIP TOPLAYACAM SONRASINDA
			MOV		R4,#0			; BU SONUCUM OLACAK
			LDR		R6,=ADRES
			SUB		R6,#1			;CONTROL SIGNALIM BU
LOOP2		LDRB	R3,[R5]
			SUB		R5,#1			; BIR ONCEKI ADRESE DON
			MUL		R3,R2
			ADD		R4,R3
			MUL		R2,R1			;10 ILE CARP
			CMP		R5,R6
			BNE		LOOP2
			
			CMP		R0,R4
			CPYHI	R0,R4			; R4 KUCUKSE R0'YA KOPYALA
			BLS		JUMP
			
			BL		RECURSION
JUMP		POP		{R0,LR}
			BX		LR
			ALIGN
			END